<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sakhi Voice</title>
  <meta name="description" content="Sakhi Voice — multilingual pseudo lip-sync demo (single file)" />
  <link rel="icon" href="./Sakhi_logo.png" />
  <style>
    :root { --bg:#0b1020; --text:#e9eef9; --accent:#e63946; --glass:rgba(255,255,255,.08) }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:radial-gradient(80% 80% at 50% 20%, #16224b 0%, var(--bg) 55%);
      color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{min-height:100dvh;display:flex;flex-direction:column;gap:12px;padding:14px;max-width:520px;margin:0 auto}
    .card{background:linear-gradient(160deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid var(--glass);
      border-radius:18px;padding:14px;box-shadow:0 10px 36px rgba(0,0,0,.35)}
    header{display:flex;align-items:center;gap:10px;padding-top:12px}
    header img{width:28px;height:28px;border-radius:6px}
    header h1{font-size:1.1rem;margin:0;font-weight:650;letter-spacing:.2px}
    .avatar-panel{display:grid;gap:10px;grid-template-rows:1fr auto;height:calc(100dvh - 220px);min-height:360px}
    .stage{position:relative;overflow:hidden;border-radius:16px;border:1px solid var(--glass);
      background:linear-gradient(180deg,#24325f 0%,#1a2142 65%,#121a34 100%);display:grid;place-items:center}
    .avatar{width:min(92%,380px);aspect-ratio:9/16;border-radius:20px;position:relative;overflow:hidden;border:1px solid rgba(0,0,0,.06);
      background:linear-gradient(160deg,#ffe8f0 0%,#ffd8e8 40%,#fbd2e8 60%,#ffdfe8 100%)}
    .saree{position:absolute;bottom:-10%;left:50%;transform:translateX(-50%);width:130%;height:62%;
      background:radial-gradient(60% 40% at 50% 10%,rgba(255,255,255,.45),rgba(255,255,255,0) 60%),
      linear-gradient(100deg,#c8005a,#ff2a7f 40%,#ff5b9d 70%,#ff7fb4);
      clip-path:polygon(10% 0%,90% 0%,100% 35%,84% 100%,16% 100%,0% 35%);filter:drop-shadow(0 10px 14px rgba(200,0,60,.35))}
    .head{position:absolute;top:10%;left:50%;transform:translateX(-50%);width:62%;aspect-ratio:1/1.1;background:#f7d2c6;
      border-radius:50% 50% 42% 42%/48% 48% 52% 52%;box-shadow:0 6px 0 rgba(200,120,120,.25) inset}
    .hair{position:absolute;inset:-6% -6% 40% -6%;background:#2a1a17;border-bottom-left-radius:60% 50%;border-bottom-right-radius:60% 50%;
      box-shadow:0 14px 24px rgba(0,0,0,.35)}
    .bindi{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:12px;height:12px;background:var(--accent);
      border-radius:50%;box-shadow:0 0 8px rgba(230,57,70,.4)}
    .eye{position:absolute;top:52%;width:14%;height:10px;background:#111;border-radius:10px;transform-origin:center}
    .eye.left{left:33%}.eye.right{right:33%}
    .blink{animation:blink 6s infinite}
    @keyframes blink{0%,48%,52%,100%{transform:scaleY(1)}50%{transform:scaleY(.1)}}
    .mouth{position:absolute;top:68%;left:50%;transform:translateX(-50%);width:26%;height:16px;background:#7d1b2a;
      border-radius:0 0 14px 14px/0 0 12px 12px;box-shadow:inset 0 -4px 0 rgba(0,0,0,.25);transition:height .08s,border-radius .08s}
    .mouth.open{height:34px;border-radius:0 0 18px 18px/0 0 16px 16px}
    .necklace{position:absolute;top:82%;left:50%;transform:translateX(-50%);width:48%;height:10px;border-radius:10px;
      background:radial-gradient(circle at 10% 50%,#ffd36d,#e2a900 60%,#9b6b00);box-shadow:0 4px 8px rgba(0,0,0,.25)}
    .controls{display:grid;gap:10px;grid-template-columns:1fr 1fr}
    .controls>*{width:100%}
    select,textarea,button{background:#0f1733;color:var(--text);border:1px solid var(--glass);border-radius:12px;padding:10px 12px;font-size:.95rem}
    textarea{grid-column:1/-1;min-height:90px;resize:vertical}
    button{cursor:pointer;font-weight:600}
    .primary{background:linear-gradient(90deg,#3d66ff,#7aa2ff);border:none}
    .ghost{background:transparent}
    .presets{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .preset{font-size:.8rem;padding:6px 10px;border-radius:999px;border:1px solid var(--glass);background:#0f1733;cursor:pointer}
    footer{opacity:.8;font-size:.85rem;text-align:center;padding:10px 0 18px}
    .muted{color:#a8b5d9}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:6px}
    .brand img{height:26px}
    @media (min-width:540px){.avatar-panel{height:68vh}}
  </style>
</head>
<body>
  <div class="wrap" aria-live="polite">
    <header class="card">
      <div class="brand">
        <img src="./JIo_logo.png" alt="Jio logo" />
        <img src="./Sakhi_logo.png" alt="Sakhi logo" />
      </div>
      <h1>Sakhi Voice — Multilingual</h1>
    </header>

    <section class="card avatar-panel">
      <div class="stage">
        <div class="avatar" aria-label="Indian woman in saree avatar">
          <div class="head">
            <div class="hair"></div>
            <div class="bindi"></div>
            <div class="eye left blink"></div>
            <div class="eye right blink"></div>
            <div id="mouth" class="mouth"></div>
          </div>
          <div class="necklace"></div>
          <div class="saree"></div>
        </div>
      </div>

      <div class="controls">
        <select id="lang">
          <option value="en-IN" selected>English (India)</option>
          <option value="hi-IN">Hindi (हिंदी)</option>
          <option value="kn-IN">Kannada (ಕನ್ನಡ)</option>
          <option value="mr-IN">Marathi (मराठी)</option>
          <option value="ta-IN">Tamil (தமிழ்)</option>
          <option value="te-IN">Telugu (తెలుగు)</option>
          <option value="ml-IN">Malayalam (മലയാളം)</option>
          <option value="gu-IN">Gujarati (ગુજરાતી)</option>
          <option value="bn-IN">Bengali (বাংলা)</option>
          <option value="pa-IN">Punjabi (ਪੰਜਾਬੀ)</option>
        </select>

        <select id="voice"></select>

        <textarea id="text" placeholder="Type a message for Sakhi to speak…">
Namaste! I am Sakhi — your multilingual assistant. How can I help you today?
        </textarea>

        <button class="primary" id="speakBtn">▶️ Speak</button>
        <button class="ghost" id="stopBtn">⏹ Stop</button>

        <div class="presets" id="presets" style="grid-column:1/-1;"></div>
      </div>
    </section>

    <footer>
      <div class="muted">© 2025 • Sakhi Voice • Demo only · Uses browser speech (no server)</div>
    </footer>
  </div>

<script>
  // ---- TTS + pseudo lip-sync ----
  const synth = window.speechSynthesis;
  const langSel = document.getElementById('lang');
  const voiceSel = document.getElementById('voice');
  const textEl = document.getElementById('text');
  const speakBtn = document.getElementById('speakBtn');
  const stopBtn = document.getElementById('stopBtn');
  const mouth = document.getElementById('mouth');
  const presetsEl = document.getElementById('presets');

  let voices = [];
  let flapTimer = null;

  const SAMPLE_LINES = {
    "en-IN": "Hello! I am Sakhi. How can I help you today?",
    "hi-IN": "नमस्ते! मैं सखी हूँ। मैं आपकी किस तरह सहायता कर सकती हूँ?",
    "kn-IN": "ನಮಸ್ತೆ! ನಾನು ಸಖಿ. ನಿಮಗೆ ಹೇಗೆ ಸಹಾಯ ಮಾಡಲಿ?",
    "mr-IN": "नमस्कार! मी सखी आहे. मी तुम्हाला कशी मदत करू?",
    "ta-IN": "வணக்கம்! நான் சகி. உங்களுக்கு எப்படி உதவலாம்?",
    "te-IN": "నమస్తే! నేను సఖి. మీకు ఎలా సహాయం చేయగలను?",
    "ml-IN": "നമസ്‌കരം! ഞാൻ സഖി. ഞാൻ എങ്ങനെ സഹായിക്കാം?",
    "gu-IN": "નમસ્તે! હું સખી છું. હું તમારી કેવી રીતે મદદ કરી શકું?",
    "bn-IN": "নমস্কার! আমি সখী। আমি কীভাবে সাহায্য করতে পারি?",
    "pa-IN": "ਸਤ ਸ੍ਰੀ ਅਕਾਲ! ਮੈਂ ਸਖੀ ਹਾਂ। ਮੈਂ ਤੁਹਾਡੀ ਕਿਵੇਂ ਮਦਦ ਕਰ ਸਕਦੀ ਹਾਂ?"
  };

  function buildPresets() {
    presetsEl.innerHTML = '';
    Object.entries(SAMPLE_LINES).forEach(([k, v]) => {
      const btn = document.createElement('button');
      btn.className = 'preset';
      btn.textContent = k;
      btn.title = v;
      btn.onclick = () => { langSel.value = k; populateVoices(); textEl.value = v; };
      presetsEl.appendChild(btn);
    });
  }

  function loadVoices() {
    voices = synth.getVoices();
    populateVoices();
  }
  function populateVoices() {
    const lang = langSel.value.toLowerCase();
    voiceSel.innerHTML = '';
    const primary = voices.filter(v => v.lang && v.lang.toLowerCase().startsWith(lang));
    const fallback = voices.filter(v => v.lang && v.lang.toLowerCase().startsWith(lang.split('-')[0]));
    const finalList = primary.length ? primary : (fallback.length ? fallback : voices);
    finalList.forEach((v, i) => {
      const opt = document.createElement('option');
      opt.value = v.name; opt.textContent = `${v.name} — ${v.lang}`;
      if (i === 0) opt.selected = true;
      voiceSel.appendChild(opt);
    });
  }
  speechSynthesis.onvoiceschanged = loadVoices;
  if (!voices.length) setTimeout(loadVoices, 80);

  function startFlap(){ if (flapTimer) clearInterval(flapTimer); flapTimer=setInterval(()=>mouth.classList.toggle('open'),90); }
  function stopFlap(){ if (flapTimer) clearInterval(flapTimer); mouth.classList.remove('open'); }

  function speak(){
    const text = (textEl.value||'').trim(); if (!text) return;
    if (synth.speaking) synth.cancel();

    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = langSel.value;
    const chosen = voices.find(v => v.name === voiceSel.value);
    if (chosen) utter.voice = chosen;
    utter.rate = 0.95; utter.pitch = 1.0;

    utter.onboundary = () => { mouth.classList.add('open'); setTimeout(()=>mouth.classList.remove('open'), 60); };
    utter.onstart = startFlap;
    utter.onend = stopFlap;
    utter.onerror = stopFlap;

    synth.speak(utter);
  }
  function stop(){ if (synth.speaking) synth.cancel(); stopFlap(); }

  speakBtn.addEventListener('click', speak);
  stopBtn.addEventListener('click', stop);
  langSel.addEventListener('change', () => { populateVoices(); textEl.value = SAMPLE_LINES[langSel.value] || textEl.value; });

  buildPresets();
</script>
</body>
</html>
